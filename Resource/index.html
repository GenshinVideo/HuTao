<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="no-referrer">
  <title>Resource Downloader</title>
  <link rel="stylesheet" href="../css/Resource.css">
  <script type="module" src="../js/Resource/initSite.js"></script>
  <script defer src="../js/Resource/all.js"></script>


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const urlValue = localStorage.getItem("url");
    const videoElement = document.getElementById("background-video");

    if (videoElement) {
      const defaultVideos = ["4ziysqXOQ8", "U5hbdsT9W7", "g0mMIvshDb"];
      const defaultVideo = "videos/Genshin.mp4";
      let videoSrc = defaultVideo;

      if (urlValue) {
        if (urlValue.includes(defaultVideos[0])) {
          videoSrc = "videos/StarRail.mp4";
        } else if (urlValue.includes(defaultVideos[1])) {
          videoSrc = "videos/1730873862934_507.mp4";
        } else if (urlValue.includes(defaultVideos[2])) {
          videoSrc = "videos/3rd.mp4";
        }
      }

      videoElement.src = videoSrc;
      videoElement.load();
    }
  });
</script>

</head>

<body>
  <div class="BackGroundMovie">
    <video id="background-video" loop autoplay muted playsinline></video>
  </div>
  <nav class="navbar" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <span class="navbar-item">
          <strong>Resource Downloader (Rewrote mHY-dl.)</strong>
        </span>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="mainNavbar">
          <span aria-hidden="true">
          </span>
          <span aria-hidden="true">
          </span>
          <span aria-hidden="true">
          </span>
        </a>
      </div>
      <div class="navbar-menu" id="mainNavbar">
        <div class="navbar-start">
        </div>
        <div class="navbar-end">
          <div class="is-hidden navbar-item" id="versionbox">
            <span>Latest version:
              <strong id="versiontext">
              </strong>
            </span>
          </div>
          <div class="navbar-item">
            <div class="buttons">
              <a class="button is-dark" id="settingsbutton">
                <span class="icon is-small">
                  <i class="fas fa-cog"></i>
                </span>
              </a>
              <a class="button is-hidden is-dark" id="helpbutton">
                <span class="icon is-small">
                  <i class="fas fa-question"></i>
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <div class="modal" id="settingsmodal">
    <div class="modal-background">
    </div>
    <div class="modal-content">
      <div class="box">
        <h1 class="title">Settings</h1>
        <hr class="divider">
        <article class="message is-danger is-hidden urlfailbox">
          <div class="message-header">
            <p>Failed to get update data</p>
          </div>
          <div class="message-body urlfailtext">
          </div>
        </article>
        <div class="field">
          <label class="label">Update data URL</label>
          <div class="control has-icons-left urlcontrol">
            <input class="input urlinput" type="url" placeholder="https://sdk-...">
            <span class="icon is-small is-left">
              <i class="fas fa-link"></i>
            </span>
            <span class="icon is-small is-right is-hidden urlerroricon">
              <i class="fas fa-exclamation-triangle"></i>
            </span>
          </div>
        </div>
        <div class="field">
          <div class="control">
            <label class="checkbox">
              <input type="checkbox" class="predlcheckbox">Show pre-downloads, if available</label>
          </div>
        </div>
        <!-- <hr class="divider"> バーがない方が綺麗に見える -->
        <div class="field">
          <div class="control SaveButtonPosition">
            <button class="button is-success savebutton">
              <strong>Save</strong>
            </button>
          </div>
        </div>
        <hr class="divider">
        <div class="field">
          <font size="3">
            <b>How to use
              <br></b>
          </font>
          <div class="control">
            <div style="border: 2px solid #007BFF; border-radius: 8px; padding: 10px; margin-bottom: 5px;">
              <font size="2">
                <b>UserScript
                  <br></b>
              </font>
              <font size="1">To use the script, click <a href="key.user.js" target="_self" rel="noopener noreferrer"><button class="HTUB">Install key.user.js</button></a> to download and install the UserScript.
                <br>Then, click<button class="HTUB" onclick="HTUB()">here</button>to copy the "Update data URL". Paste it into the input field and click "Save".</font>
            </div>
            <div style="border: 2px solid #28A745; border-radius: 8px; padding: 10px;">
              <font size="2">
                <b>herokuapp
                  <br></b>
              </font>
              <font size="1">Visit <a href="https://cors-anywhere.herokuapp.com/corsdemo" target="_blank" rel="noopener noreferrer">herokuapp</a> and click the<button class="DemoButton">Request temporary access to the demo server</button>button.
                <br>Then, click<button class="HTUB" onclick="HTUB_()">here</button>to copy the "Update data URL". Paste it into the input field and click "Save".</font>
            </div>
          </div>
        </div>
        <div class="field">
          <font size="3"><b>API URL</b><br></font>
          <div class="control">
            <div style="border: 2px solid #FF3399; border-radius: 8px; padding: 10px; margin-bottom: 5px;">
              <font size="2"><b>Genshin Impact</b></font><br>
              <font size="1">https://sg-hyp-api.hoyoverse.com/hyp/hyp-connect/api/getGamePackages?game_ids[]=gopR6Cufr3&launcher_id=VYTpXlbWo8</font><br>
              <font size="2"><b>Genshin Impact 5.6- (not support)</b></font><br>
              <font size="1">https://github.com/Escartem/SophonDownloader</font><br>
              <font size="1">https://hoyo-updates.vercel.app/</font>
            </div>
            <div style="border: 2px solid #FF3399; border-radius: 8px; padding: 10px; margin-bottom: 5px;">
              <font size="2"><b>Honkai: Star Rail</b><br></font>
              <font size="1">https://sg-hyp-api.hoyoverse.com/hyp/hyp-connect/api/getGamePackages?game_ids[]=4ziysqXOQ8&launcher_id=VYTpXlbWo8</font>
            </div>
            <div style="border: 2px solid #FF3399; border-radius: 8px; padding: 10px; margin-bottom: 5px;">
              <font size="2"><b>Zenless Zone Zero</b><br></font>
              <font size="1">https://sg-hyp-api.hoyoverse.com/hyp/hyp-connect/api/getGamePackages?game_ids[]=U5hbdsT9W7&launcher_id=VYTpXlbWo8</font>
            </div>
            <div style="border: 2px solid #FF3399; border-radius: 8px; padding: 10px; margin-bottom: 5px;">
              <font size="2"><b>Honkai Impact 3rd</b><br></font>
              <font size="1">https://sg-hyp-api.hoyoverse.com/hyp/hyp-connect/api/getGamePackages?game_ids[]=g0mMIvshDb&launcher_id=VYTpXlbWo8</font>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button class="modal-close is-large" aria-label="close">
    </button>
  </div>
  <div class="modal" id="helpmodal">
    <div class="modal-background">
    </div>
    <div class="modal-content">
      <div class="box">
        <div class="content">
        </div>
      </div>
    </div>
    <button class="modal-close is-large" aria-label="close">
    </button>
  </div>
  <section class="section">
    <div class="container">
      <div class="columns is-mobile is-centered" id="progressbar">
        <div class="column is-9-mobile is-4-tablet is-3-fullhd">
          <h1 class="title is-4 has-text-centered">Fetching data...</h1>
          <progress class="progress" max="100">Loading...</progress>
        </div>
      </div>
      <div class="block is-hidden" id="maincolumn">
        <div class="block is-hidden" id="reccolumn">
          <h1 class="title">The latest and greatest</h1>
          <h2 class="subtitle">If you want to update from
            <span id="lastversiontext">
            </span>or just (re)installed the game.</h2>
          <div class="columns is-desktop is-multiline" id="recboxes">
          </div>
        </div>
        <div class="block mt-6 is-hidden" id="oldcolumn">
          <h1 class="title">Update from an older version</h1>
          <h2 class="subtitle">If you took a nice, long break and might have missed an update or two.</h2>
          <div class="columns is-desktop is-multiline" id="oldboxes">
          </div>
        </div>
        <div class="block mt-6" id="othercolumn">
          <h1 class="title">Old Resource Data</h1>
          <h2 class="subtitle">If you need past resources for some reason.</h2>
          <div class="columns is-desktop is-multiline" id="oldboxes" style="user-select: auto;">
            <div class="column is-full">
              <div class="box">
                <p class="title is-4">Old Data</p>
                <select id="SelectBoxEins">
                </select>
                <select id="SelectBoxZwei">
                </select>
                <a id="SelectBoxDrei" href="" class="button">
                  <span class="icon">
                    <svg class="svg-inline--fa fa-download fa-w-16" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="download" role="img" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512" data-fa-i2svg="">
                      <path fill="currentColor" d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z">
                      </path>
                    </svg>
                  </span>
                  <strong>Download</strong>
                </a>
                <p class="mt-3 is-family-monospace" id="urlbox">URL:</p>
                <p class="mt-3 is-family-monospace" id="md5box">MD5:</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      //<script src="../js/Resource/Resource.js"></script>
    </div>
  </section>
</body>

</html>